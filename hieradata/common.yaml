---
profile::default::default_components:
  - apt
  - sysctl
  - users
  - network
  - resolvconf
  - fail2ban

component::apt::repos:
  - ubuntu
  - ubuntu::utopic
  - puppetlabs
  - freifunk

component::apt::ubuntu::mirror: mirror.lrz.de
component::apt::ubuntu::utopic::mirror: mirror.lrz.de

component::resolvconf::nameservers:
  - 213.73.91.35

component::resolvconf::template: |
  # Generated by puppet
  # all manual changes will be LOST!
  domain <%= @domain %>
  search <%= @domain %>

  <% @nameservers.sort.each do |ns| -%>
  nameserver <%= ns %>
  <% end -%>

fail2ban::bantime: 900
fail2ban::findtime: 600
fail2ban::maxretry: 3

profile::fastd::mesh_vpn_interface: 'mesh-vpn'
profile::fastd::community: 'ff'
profile::batman_adv::bridge: 'brff'
profile::firewall::purge: true

profile::radvd::ipv6_prefix_without_length: 'fdef:ffc0:4fff::'
profile::radvd::ipv6_prefix_length: 64
# Only announce router if you can globally route the ipv6 prefix
profile::radvd::announce_router: false

profile::dns::listen_address: '127.0.0.1'
profile::dns::upstream_servers:
  - '85.214.20.141'  # FoeBud
  - '213.73.91.35'   # dnscache.berlin.ccc.d

chrony::servers: [ '0.ntp.ffmuc.net', 'de.pool.ntp.org' ]
chrony::serve_ntp: true
chrony::client_allow: [ '10.80.0.0/16', 'fdef:ffc0:4fff::/64' ]

fastd::port: 10000

# fastd mac address: ${mac_prefix}:${hex_gateway_number}:${mac_suffix}
# hex_gateway_number is gateway_number automatically converted into hex
# therefor we only have at the moment the possibility of 0xff gateways
fastd::mac_prefix: 'f2:80:00'
fastd::mac_suffix: '23:42'
fastd::version: latest
fastd::purge_peers: false

component::users::collections:
  - admin

component::users::admin::defaults:
  groups:
    - sudo
    - adm

component::users::admin:
  fpletz:
    password: '$6$Gfcm1ilr$Egw6rSSadO/sSB/7NknhieJN./6zLQDjcNRu/vlm3j3qTHDn4xTrue2hYBD04BvTlA7JRXp9UTBczKrtEOITm0'
    ssh_authorized_keys:
      ffmucpletz:
        type: ssh-ed25519
        key:  AAAAC3NzaC1lZDI1NTE5AAAAIKuIAJJ28E7ak1w8qb7zJSbSROnsEKMul4tfuOVkAha0
  ruebezahl:
    ssh_authorized_keys:
      ruebezahl:
        type: 'ssh-rsa'
        key:  'AAAAB3NzaC1yc2EAAAABIwAAAQEA5PD0xVViVQd5qgE2E4iC8ZWLIg8rmhz1Zb7NJgcA/uwvLTsc1aNW5c16qVWQot37EMHTeh1emr6C0oqNXSOsLWlOfcIHuV/QlVFhxiFZjCv/MWenb2US0mS9po7OS1v+zDAfotb2uUf2MPuaOEcnzToCUu4fa2Guh6YqislWfdFJRbA6rHZtWR48t1cJjhYI5KuF4Y2ef3yMDohTBXcA+oy8rKEfrCJuUaxzqlJPzKRsu1i0mooOvIehBUxAecmRBruBnamTf2NYestshazVkFKnUFf9gk25t6dVuT4UiMjBZdT6lqlbyW+RUtJTa6t65oUj4WfSp9Qt5GS172Ko0w=='
  trino:
    ssh_authorized_keys:
      trino:
        type: 'ssh-rsa'
        key:  'aaaab3nzac1yc2eaaaadaqabaaacaqdxgnigkltefaldg1f9xbzwtv49oaai6xmglpare0nc6+qnpv15sonrdbdlkk1alewyichulxf/aude2zqyztx8mt4+/aee0uihhfcsnqeb85zhspu9kivlxm050wea+urgnnimucqkvnhm37gl35zvwpmwkf3jhlkgjsfvq4lmulll1tzanfeg1xl0ex7sianjoddwvm7q2tjenhkhjraeg/bxevip1gbj0wf5bwhrm305vj82mci5lynbptmnn2uzi4n6xz6k+ovx2owxgh43yi/eprd1fuhfi50bh4a7+ur31j3sxa8+c3uqqvpvpwhzh+delabxpgcaxw2v8twnn5ev/0dhbf/hf1noon/8q13xga4ulhvyblkxeho4vhjgx5e3sykever/svpqqai3p4qs7prtezjqmxoahn9n93mdi1xg5cxyfgmyhmuodkrvkhxftmqizvd1kguede5wh18xpalpsyq8cjrxmx7rtl0+m70wjc3f7jg4zo+kst2fjsqxuh1x9dwfo1hmdvzcpj5laspptzc+fyqimcxpljhykg09bazn050wer5jbk0fjsmscvdimwtnp13pnavddempiis6cnam8bumb9ni1rl1phmzbqdg7wailc9+bsztzai6qqhehdxsqk3qjsow812tvtmu1u/zp2wkom4uiq=='
  lhampe:
    password: '$6$bWgQAOHl/$BQxsaYa6uFHYQ31uOIcuBBrszsqRCEhbfjggtXqLdaRxHsb4o85fNWzePsSvG62rmrALrhFPoJPEK5ne1CyfV/'
    ssh_authorized_keys:
      lhampe:
        type: 'ssh-rsa'
        key:  'AAAAB3NzaC1yc2EAAAADAQABAAABAQDQooEsyAa2hT2dUSvcPz2Iu5qJe+YUFybUR82kLJeMx8LOFRK4l6n9CP5OUpRoMCiOmwlPLWaaQfzyBDZvgQVS0k5wH0z+gL2/843pg6SMQ0pbnu4rJogspDMuwyjDNuzLLgj8YuIswuExyz++3oJtYPwQ2axZHVFIzjD9oOjbXn1i+RePNF9Me8vTLEWIvOFVbtuDjdLw/6N4TYXHcwDfaNBzMgtQrBlBy+0ahlRQ09vQIbFzJOORECeqvKBrG2aPv7tAFAjGMDSE4+sKCL4IECqTQTIAlpTpsNeOj2PvFyNszKhdefRF88O83qq6hgPMGU7p9p4hl8tIISWrkr8v'

