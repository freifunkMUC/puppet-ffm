---
role::role_class: gateway

component::apt::pins:
  libgps:
    packages: libgps21
    release: utopic
    priority: 500

dnsmasq::interfaces:
  - brffmuc

component::dnsmasq::pools:
  access:
    dhcp_start: 10.80.2.0
    dhcp_end: 10.80.3.255
    netmask: 255.255.0.0
    lease_time: 1h

component::dnsmasq::dnsservers:
  google:
    ip: 8.8.8.8

fastd::port: 10000

# fastd mac address: ${mac_prefix}:${hex_gateway_number}:${mac_suffix}
# hex_gateway_number is gateway_number automatically converted into hex
# therefor we only have at the moment the possibility of 0xff gateways
fastd::mac_prefix: 'f2:80:00'
fastd::mac_suffix: '23:42'
fastd::version: latest
fastd::purge_peers: false


profile::fastd::mesh_vpn_interface: 'mesh-vpn'
profile::fastd::community: ffmuc
batman_adv::bridge: brffmuc
batman_adv::version: '2014.4'

profile::dhcpd::range_start: '10.0.2.0'
profile::dhcpd::range_end: '10.0.3.255'
profile::dhcpd::subnet: '10.0.0.0'

batman_adv::netmask: '255.255.224.0'
batman_adv::gateway_ip: '10.0.0.9'
batman_adv::gateway_number: 9
batman_adv::vpn_routing_table: freifunk

batman_adv::ipv6_prefix_without_length: 'fdef:ffc0:4fff::'
batman_adv::ipv6_prefix_length: 64


fastd::purge_peers: true
# XXX: these keys are public and need to be generated before deploying!
fastd::secret_key: '604b94346dfda1010177121991a33810c3785e7250799084e53c724837ef1a71'
fastd::public_key: 'bcc047f2fb0acc2fd57028265607a7543aeb0bae3bf8f9f51389c080d0eff018'

fastd::on_verify_command: 'true'
fastd::log_level: 'debug2'

fastd::port: 10000

# fastd mac address: ${mac_prefix}:${hex_gateway_number}:${mac_suffix}
# hex_gateway_number is gateway_number automatically converted into hex
# therefor we only have at the moment the possibility of 0xff gateways
fastd::mac_prefix: 'f2:80:00'
fastd::mac_suffix: '23:42'
fastd::version: latest
fastd::purge_peers: false

profile::openvpn::configs:
  mullvad1:
    vpn_routing_table: 'freifunk'
    dependent_services:
      - 'dnsmasq'
    provider_fqdns:
      - 'se.mullvad.net'
    port: 1194
    provider: 'mullvad'
